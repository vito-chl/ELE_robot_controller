# 电力巡检机器人控制系统

## 0. 板级接口

![板级接口](https://raw.githubusercontent.com/vito-chl/ELE_robot_controller/master/figures/板级接口说明.png)

## 1. 简介

- 软件：基于rt-thread实时操作系统
- 硬件：STM32F4高性能单片机
  

## 2. 编译说明


| 环境         | 说明                                                         |
| ------------ | ------------------------------------------------------------ |
| PC操作系统   | Windows                                                      |
| 编译器       | arm-none-eabi-gcc version 6.3.1 20170620 (release)/armcc/iar |
| 构建工具     | scons/mdk5/iar                                               |
| 依赖软件环境 | Env工具/(MDK或IAR或arm-none-eabi-gcc)/git/调试器驱动         |




## 3. 烧写及执行

烧写使用 Jlink仿真器

### 3.1 运行结果

如果编译 & 烧写无误，会在控制串口上看到RT-Thread的启动logo信息：




## 4. 驱动支持情况及计划

| 驱动       | 支持情况 | 连接方式 | 备注                         |
| :--------: | :------: | :--------------------------: | ---------- |
| 控制台 | 支持 | uart(ttl) | 用于系统交互和调试，位于UART1 |
| 电机驱动 | 支持     | uart(RS232) | 位于UART2(PD5, PD6) |
| 基站控制器  | 支持     | uart(RS232) | 位于UART3(PB10, PB11) |
| 相机控制器 | 支持     | uart(RS232) | 位于UART6(PC6, PC7) |
| BMS系统 | 开发中   |      |                       |
| RTK | 开发中  |      |           |

------

### 4.1 机器人运动指令支持列表（可上机测试）

- 机器人地址为 0x01

| 功能码 | 说明                         |
| :----: | ---------------------------- |
|  0x01  | 设置电机前进速度             |
|  0x02  | 设置电机后退速度             |
|  0x03  | 机器人运动停止               |
|  0x04  | 机器人运动开始               |
|  0x05  | 设置机器人前进距离           |
|  0x06  | 设置机器人后退距离           |
|  0x30  | 返回传感器信息(目前为空处理) |
|  0x31  | 查询机器人速度大小           |
|  0x32  | 查询机器人运动方向           |
